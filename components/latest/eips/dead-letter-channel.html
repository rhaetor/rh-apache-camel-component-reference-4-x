<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dead Letter Channel :: Red Hat Integration</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">Red Hat Integration</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="components" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Camel Components</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../aws-summary.html">AWS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-ddb-component.html">AWS DynamoDB</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-kinesis-component.html">AWS Kinesis</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-lambda-component.html">AWS Lambda</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-s3-component.html">AWS S3 Storage Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-sns-component.html">AWS Simple Notification System (SNS)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../aws2-sqs-component.html">AWS Simple Queue Service (SQS)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../bean-component.html">Bean</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../direct-component.html">Direct</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../elasticsearch-rest-component.html">Elasticsearch Rest</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../file-component.html">File</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ftp-component.html">FTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../http-component.html">HTTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jira-component.html">Jira</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jms-component.html">JMS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kafka-component.html">Kafka</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kamelet-component.html">Kamelet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../log-component.html">Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../microprofile-health.html">Microprofile Health</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../microprofile-metrics-component.html">MicroProfile Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mllp-component.html">MLLP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mock-component.html">Mock</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mongodb-component.html">MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../netty-component.html">Netty</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../platform-http-component.html">Platform HTTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../properties-component.html">Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rest-component.html">REST</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../salesforce-component.html">Salesforce</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../seda-component.html">SEDA</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../sql-component.html">SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../timer-component.html">Timer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../xquery-component.html">XQuery</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../dataformats/index.html">Data Formats</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/avro-dataformat.html">Avro</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/avro-jackson-dataformat.html">Avro Jackson</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/bindy-dataformat.html">Bindy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/hl7-dataformat.html">HL7</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/jacksonxml-dataformat.html">JacksonXML</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/protobuf-jackson-dataformat.html">Protobuf Jackson</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dataformats/soapjaxb-dataformat.html">SOAP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../languages/index.html">Languages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/constant-language.html">Constant</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/csimple-language.html">CSimple</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/exchangeProperty-language.html">ExchangeProperty</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/file-language.html">File</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/header-language.html">Header</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/jsonpath-language.html">JsonPath</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/ref-language.html">Ref</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/simple-language.html">Simple</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/tokenize-language.html">Tokenize</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../languages/xtokenize-language.html">XML Tokenize</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#others:index.adoc">Miscellaneous Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../others/microprofile-health.html">Microprofile Health</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="aggregate-eip.html">Aggregate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="batch-config-eip.html">Batch-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bean-eip.html">Bean</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="change-data-capture.html">Change Data Capture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="channel-adapter.html">Channel Adapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="choice-eip.html">Choice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="circuitBreaker-eip.html">Circuit Breaker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="claimCheck-eip.html">Claim Check</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="competing-consumers.html">Competing Consumers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="composed-message-processor.html">Composed Message Processor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="content-based-router-eip.html">Content Based Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="content-enricher.html">Content Enricher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="content-filter-eip.html">Content Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="convertBodyTo-eip.html">Convert Body To</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="correlation-identifier.html">Correlation Identifier</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="customLoadBalancer-eip.html">Custom Load Balancer</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="dead-letter-channel.html">Dead Letter Channel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="delay-eip.html">Delay</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="durable-subscriber.html">Durable Subscriber</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="dynamicRouter-eip.html">Dynamic Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enrich-eip.html">Enrich</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="eventDrivenConsumer-eip.html">Event Driven Consumer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="event-message.html">Event Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="failover-eip.html">Failover</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="faultToleranceConfiguration-eip.html">Fault Tolerance Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fault-tolerance-eip.html">Fault Tolerance EIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="filter-eip.html">Filter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="from-eip.html">From</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="guaranteed-delivery.html">Guaranteed Delivery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hystrixConfiguration-eip.html">Hystrix Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hystrix-eip.html">Hystrix EIP (deprecated)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="idempotentConsumer-eip.html">Idempotent Consumer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="inOnly-eip.html">In Only</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="inOut-eip.html">In Out</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intercept.html">Intercept</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kamelet-eip.html">Kamelet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="loadBalance-eip.html">Load Balance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="log-eip.html">Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="loop-eip.html">Loop</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="marshal-eip.html">Marshal EIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message.html">Message</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-broker.html">Message Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-bus.html">Message Bus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-channel.html">Message Channel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-dispatcher.html">Message Dispatcher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-endpoint.html">Message Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-expiration.html">Message Expiration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-history.html">Message History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-router.html">Message Router</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="message-translator.html">Message Translator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging-bridge.html">Messaging Bridge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging-gateway.html">Messaging Gateway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging-mapper.html">Messaging Mapper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multicast-eip.html">Multicast</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="normalizer.html">Normalizer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="onFallback-eip.html">On Fallback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="otherwise-eip.html">Otherwise</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pipeline-eip.html">Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="point-to-point-channel.html">Point to Point Channel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pollEnrich-eip.html">Poll Enrich</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="polling-consumer.html">Polling Consumer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="process-eip.html">Process</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="process-manager.html">Process Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="publish-subscribe-channel.html">Publish Subscribe Channel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="random-eip.html">Random</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="recipientList-eip.html">Recipient List</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removeHeader-eip.html">Remove Header</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removeHeaders-eip.html">Remove Headers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removeProperties-eip.html">Remove Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removeProperty-eip.html">Remove Property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="requestReply-eip.html">Request Reply</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resequence-eip.html">Resequence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resilience4jConfiguration-eip.html">Resilience4j Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resilience4j-eip.html">Resilience4j EIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="return-address.html">Return Address</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rollback-eip.html">Rollback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="roundRobin-eip.html">Round Robin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="routingSlip-eip.html">Routing Slip</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="saga-eip.html">Saga</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sample-eip.html">Sample</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scatter-gather.html">Scatter Gather</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="script-eip.html">Script</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="selective-consumer.html">Selective Consumer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="service-activator.html">Service Activator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="serviceCall-eip.html">Service Call</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setBody-eip.html">Set Body</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setHeader-eip.html">Set Header</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setOutHeader-eip.html">Set Out Header EIP (deprecated)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setProperty-eip.html">Set Property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sort-eip.html">Sort</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="split-eip.html">Split</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="step-eip.html">Step</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sticky-eip.html">Sticky</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="stop-eip.html">Stop</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="stream-config-eip.html">Stream-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="threads-eip.html">Threads</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="throttle-eip.html">Throttle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="to-eip.html">To</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="toD-eip.html">To D</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="topic-eip.html">Topic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transactional-client.html">Transactional Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transform-eip.html">Transform</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="unmarshal-eip.html">Unmarshal EIP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="validate-eip.html">Validate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="weighted-eip.html">Weighted</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="when-eip.html">When</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="wireTap-eip.html">Wire Tap</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Camel Components</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Camel Components</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../manual/latest/index.html">User manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../manual/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../manual/latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Camel Components</a></li>
    <li><a href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a></li>
    <li><a href="dead-letter-channel.html">Dead Letter Channel</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/gforde/mygit/camel/core/camel-core-engine/src/main/docs/modules/eips/pages/dead-letter-channel.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Dead Letter Channel</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Camel supports the
<a href="http://www.enterpriseintegrationpatterns.com/DeadLetterChannel.html">Dead
Letter Channel</a> from the <a href="enterprise-integration-patterns.html" class="page">EIP
patterns</a> using the
<a href="https://www.javadoc.io/doc/org.apache.camel/camel-base/current/org/apache/camel/processor/errorhandler/DeadLetterChannel.html">DeadLetterChannel</a>
processor which is an <a href="../../../manual/latest/error-handler.html" class="page">Error Handler</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/eip/DeadLetterChannelSolution.gif" alt="image">
</div>
</div>
<div class="paragraph">
<p>The Dead Letter Channel lets you control behaviors including redelivery,
whether to propagate the thrown Exception to the caller (the <strong>handled</strong>
option), and where the (failed) Exchange should now be routed to.</p>
</div>
<div class="paragraph">
<p>The Dead Letter Channel is also by default configured to not be verbose
in the logs, so when a message is handled and moved to the dead letter
endpoint, then there is nothing logged. If you want some level of
logging you can use the various options on the redelivery policy / dead
letter channel to configure this. For example if you want the message
history then set logExhaustedMessageHistory=true (and logHandled=true
for Camel 2.15.x or older).</p>
</div>
<div class="paragraph">
<p>When the DeadLetterChannel moves a message to the dead letter endpoint,
any new Exception thrown is by default handled by the dead letter
channel as well. This ensures that the DeadLetterChannel will always
succeed. From <strong>Camel 2.15</strong> onwards this behavior can be changed by
setting the option deadLetterHandleNewException=false. Then if a new
Exception is thrown, then the dead letter channel will fail and
propagate back that new Exception (which is the behavior of the default
error handler). When a new Exception occurs then the dead letter channel
logs this at WARN level. This can be turned off by setting
logNewException=false.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>Difference between Dead Letter Channel and Default Error
Handler</strong> The Default Error Handler does very little: it ends the Exchange
immediately and propagates the thrown Exception back to the caller.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Redelivery"><a class="anchor" href="#deadLetterChannel-Redelivery"></a>Redelivery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is common for a temporary outage or database deadlock to cause a
message to fail to process; but the chances are if its tried a few more
times with some time delay then it will complete fine. So we typically
wish to use some kind of redelivery policy to decide how many times to
try redeliver a message and how long to wait before redelivery attempts.</p>
</div>
<div class="paragraph">
<p>The
<a href="https://www.javadoc.io/doc/org.apache.camel/camel-base/current/org/apache/camel/processor/errorhandler/RedeliveryPolicy.html">RedeliveryPolicy</a>
defines how the message is to be redelivered. You can customize things
like</p>
</div>
<div class="ulist">
<ul>
<li>
<p>how many times a message is attempted to be redelivered before it is
considered a failure and sent to the dead letter channel</p>
</li>
<li>
<p>the initial redelivery timeout</p>
</li>
<li>
<p>whether or not exponential backoff is used (i.e. the time between
retries increases using a backoff multiplier)</p>
</li>
<li>
<p>whether to use collision avoidance to add some randomness to the
timings</p>
</li>
<li>
<p>delay pattern (see below for details)</p>
</li>
<li>
<p><strong>Camel 2.11:</strong> whether to allow redelivery during stopping/shutdown</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once all attempts at redelivering the message fails then the message is
forwarded to the dead letter queue.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-AboutmovingExchangetodeadletterqueueandusinghandled"><a class="anchor" href="#deadLetterChannel-AboutmovingExchangetodeadletterqueueandusinghandled"></a>About moving Exchange to dead letter queue and using handled</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When all attempts of redelivery have failed the
<a href="../../../manual/latest/exchange.html" class="page">Exchange</a> is moved to the dead letter queue (the dead
letter endpoint). The exchange is then complete and from the client
point of view it was processed. As such the
<a href="#">Dead Letter Channel</a> have handled the
<a href="../../../manual/latest/exchange.html" class="page">Exchange</a>.</p>
</div>
<div class="paragraph">
<p>For instance configuring the dead letter channel as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">errorHandler(deadLetterChannel("jms:queue:dead")
    .maximumRedeliveries(3).redeliveryDelay(5000));</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;route errorHandlerRef="myDeadLetterErrorHandler"&gt;
   ...
&lt;/route&gt;

&lt;bean id="myDeadLetterErrorHandler" class="org.apache.camel.builder.DeadLetterChannelBuilder"&gt;
    &lt;property name="deadLetterUri" value="jms:queue:dead"/&gt;
    &lt;property name="redeliveryPolicy" ref="myRedeliveryPolicyConfig"/&gt;
&lt;/bean&gt;

&lt;bean id="myRedeliveryPolicyConfig" class="org.apache.camel.processor.RedeliveryPolicy"&gt;
    &lt;property name="maximumRedeliveries" value="3"/&gt;
    &lt;property name="redeliveryDelay" value="5000"/&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="#">Dead Letter Channel</a> above will clear
the caused exception (<code>setException(null)</code>), by moving the caused
exception to a property on the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a>, with the
key <code>Exchange.EXCEPTION_CAUGHT</code>. Then the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a>
is moved to the <code>"jms:queue:dead"</code> destination and the client will not
notice the failure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-AboutmovingExchangetodeadletterqueueandusingtheoriginalmessage"><a class="anchor" href="#deadLetterChannel-AboutmovingExchangetodeadletterqueueandusingtheoriginalmessage"></a>Moving Exchange to dead letter queue and using the original message</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The option <strong>useOriginalMessage</strong> is used for routing the original input
message instead of the current message that potentially is modified
during routing.</p>
</div>
<div class="paragraph">
<p>For instance if you have this route:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("jms:queue:order:input")
   .to("bean:validateOrder")
   .to("bean:transformOrder")
   .to("bean:handleOrder");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The route listen for JMS messages and validates, transforms and handle
it. During this the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> payload is
transformed/modified. So in case something goes wrong and we want to
move the message to another JMS destination, then we can configure our
<a href="#">Dead Letter Channel</a> with the
<strong>useOriginalMessage</strong> option. But when we move the
<a href="../../../manual/latest/exchange.html" class="page">Exchange</a> to this destination we do not know in which
state the message is in. Did the error happen in before the
transformOrder or after? So to be sure we want to move the original
input message we received from <code>jms:queue:order:input</code>. So we can do
this by enabling the <strong>useOriginalMessage</strong> option as shown below:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There is also a <strong>useOriginalBody</strong> option.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// will use original message (body and headers)
errorHandler(deadLetterChannel("jms:queue:dead")
   .useOriginalMessage().maximumRedeliveries(5).redeliveryDelay(5000);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the messages routed to the <code>jms:queue:dead</code> is the original input.
If we want to manually retry we can move the JMS message from the failed
to the input queue, with no problem as the message is the same as the
original we received.</p>
</div>
<div class="sect2">
<h3 id="_boundary_of_original_message"><a class="anchor" href="#_boundary_of_original_message"></a>Boundary of original message</h3>
<div class="paragraph">
<p>The original input means the input message that are bounded by the current unit of work. An unit of work typically spans one route, or multiple routes if they are connected
using internal endpoints such as direct or seda. When messages are passed via external
endpoints such as JMS or HTT then the consumer will create a new unit of work, with the
message it received as input as the original input. Also some EIP patterns such as splitter,
multicast, will create a new unit of work boundary for the messages in their sub-route
(eg the splitted message); however these EIPs have an option named shareUnitOfWork which
allows to combine with the parent unit of work in regard to error handling and therefore use
the parent original message.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-OnRedelivery"><a class="anchor" href="#deadLetterChannel-OnRedelivery"></a>OnRedelivery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When <a href="#">Dead Letter Channel</a> is doing
redeliver its possible to configure a <a href="../../../manual/latest/processor.html" class="page">Processor</a>
that is executed just <strong>before</strong> every redelivery attempt. This can be
used for the situations where you need to alter the message before its
redelivered. See below for sample.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>onException and onRedeliver</strong>
We also support for per <a href="../../../manual/latest/exception-clause.html" class="page"><strong>onException</strong></a> to set
a <strong>onRedeliver</strong>. That means you can do special on redelivery for
different exceptions, as opposed to onRedelivery set on
<a href="#">Dead Letter Channel</a> can be viewed as a
global scope.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Redeliverydefaultvalues"><a class="anchor" href="#deadLetterChannel-Redeliverydefaultvalues"></a>Redelivery default values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Redelivery is disabled by default.</p>
</div>
<div class="paragraph">
<p>The default redeliver policy will use the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>maximumRedeliveries=0</p>
</li>
<li>
<p>redeliveryDelay=1000L (1 second)</p>
</li>
<li>
<p>maximumRedeliveryDelay = 60 * 1000L (60 seconds)</p>
</li>
<li>
<p>And the exponential backoff and collision avoidance is turned off.</p>
</li>
<li>
<p>The retriesExhaustedLogLevel are set to LoggingLevel.ERROR</p>
</li>
<li>
<p>The retryAttemptedLogLevel are set to LoggingLevel.DEBUG</p>
</li>
<li>
<p>Stack traces is logged for exhausted messages</p>
</li>
<li>
<p>Handled exceptions is not logged</p>
</li>
<li>
<p>logExhaustedMessageHistory is true for default error handler, and
false for dead letter channel.</p>
</li>
<li>
<p>logExhaustedMessageBody is disabled by default to avoid
logging sensitive message body/header details. If this option is true,
then logExhaustedMessageHistory must also be true.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The maximum redeliver delay ensures that a delay is never longer than
the value, default 1 minute. This can happen if you turn on the
exponential backoff.</p>
</div>
<div class="paragraph">
<p>The maximum redeliveries are the number of redelivery attempts. By
default Camel will try to process the exchange 1 + 5 times. 1 time for
the normal attempt and then 5 attempts as redeliveries.
Setting the maximumRedeliveries to a negative value such as -1 will
then always redelivery (unlimited). Setting the maximumRedeliveries to 0
will disable any redelivery attempt.</p>
</div>
<div class="paragraph">
<p>Camel will log delivery failures at the DEBUG logging level by default.
You can change this by specifying retriesExhaustedLogLevel and/or
retryAttemptedLogLevel.</p>
</div>
<div class="paragraph">
<p>You can turn logging of stack traces on/off. If turned off Camel will
still log the redelivery attempt. Its just much less verbose.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-RedeliverDelayPattern"><a class="anchor" href="#deadLetterChannel-RedeliverDelayPattern"></a>Redeliver Delay Pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Delay pattern is used as a single option to set a range pattern for
delays. If used then the following options does not apply: (delay,
backOffMultiplier, useExponentialBackOff, useCollisionAvoidance,
maximumRedeliveryDelay).</p>
</div>
<div class="paragraph">
<p>The idea is to set groups of ranges using the following syntax:
<code>limit:delay;limit 2:delay 2;limit 3:delay 3;&#8230;&#8203;;limit N:delay N</code></p>
</div>
<div class="paragraph">
<p>Each group has two values separated with colon</p>
</div>
<div class="ulist">
<ul>
<li>
<p>limit = upper limit</p>
</li>
<li>
<p>delay = delay in millis
And the groups is again separated with semi colon.
The rule of thumb is that the next groups should have a higher limit
than the previous group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lets clarify this with an example:</p>
</div>
<div class="paragraph">
<p><code>delayPattern=5:1000;10:5000;20:20000</code></p>
</div>
<div class="paragraph">
<p>That gives us 3 groups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>5:1000</p>
</li>
<li>
<p>10:5000</p>
</li>
<li>
<p>20:20000</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Resulting in these delays for redelivery attempt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Redelivery attempt number 1..4 = 0 millis (as the first group start
with 5)</p>
</li>
<li>
<p>Redelivery attempt number 5..9 = 1000 millis (the first group)</p>
</li>
<li>
<p>Redelivery attempt number 10..19 = 5000 millis (the second group)</p>
</li>
<li>
<p>Redelivery attempt number 20.. = 20000 millis (the last group)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: The first redelivery attempt is 1, so the first group should start
with 1 or higher.</p>
</div>
<div class="paragraph">
<p>You can start a group with limit 1 to eg have a starting delay:
<code>delayPattern=1:1000;5:5000</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Redelivery attempt number 1..4 = 1000 millis (the first group)</p>
</li>
<li>
<p>Redelivery attempt number 5.. = 5000 millis (the last group)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no requirement that the next delay should be higher than the
previous. You can use any delay value you like. For example with
<code>delayPattern=1:5000;3:1000</code> we start with 5 sec delay and then later
reduce that to 1 second.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Redeliveryheader"><a class="anchor" href="#deadLetterChannel-Redeliveryheader"></a>Redelivery header</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a message is redelivered the
<a href="https://www.javadoc.io/doc/org.apache.camel/camel-base/current/org/apache/camel/processor/errorhandler/DeadLetterChannel.html">DeadLetterChannel</a>
will append a customizable header to the message to indicate how many
times its been redelivered.
Before Camel 2.6: The header is <strong>CamelRedeliveryCounter</strong>, which is also
defined on the <code>Exchange.REDELIVERY_COUNTER</code>.
Starting with 2.6: The header <strong>CamelRedeliveryMaxCounter</strong>, which is
also defined on the <code>Exchange.REDELIVERY_MAX_COUNTER</code>, contains the
maximum redelivery setting. This header is absent if you use
<code>retryWhile</code> or have unlimited maximum redelivery configured.</p>
</div>
<div class="paragraph">
<p>And a boolean flag whether it is being redelivered or not (first
attempt)
The header <strong>CamelRedelivered</strong> contains a boolean if the message is
redelivered or not, which is also defined on the <code>Exchange.REDELIVERED</code>.</p>
</div>
<div class="paragraph">
<p>Dynamically calculated delay from the exchange
In Camel 2.9 and 2.8.2: The header is <strong>CamelRedeliveryDelay</strong>, which is
also defined on the <code>Exchange.REDELIVERY_DELAY</code>.
Is this header is absent, normal redelivery rules apply.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Whichendpointfailed"><a class="anchor" href="#deadLetterChannel-Whichendpointfailed"></a>Which endpoint failed</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Since Camel 2.1</strong></p>
</div>
<div class="paragraph">
<p>When Camel routes messages it will decorate the
<a href="../../../manual/latest/exchange.html" class="page">Exchange</a> with a property that contains the <strong>last</strong>
endpoint Camel send the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String lastEndpointUri = exchange.getProperty(Exchange.TO_ENDPOINT, String.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Exchange.TO_ENDPOINT</code> have the constant value <code>CamelToEndpoint</code>.</p>
</div>
<div class="paragraph">
<p>This information is updated when Camel sends a message to any endpoint.
So if it exists its the <strong>last</strong> endpoint which Camel send the Exchange
to.</p>
</div>
<div class="paragraph">
<p>When for example processing the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> at a given
<a href="../../../manual/latest/endpoint.html" class="page">Endpoint</a> and the message is to be moved into the
dead letter queue, then Camel also decorates the Exchange with another
property that contains that <strong>last</strong> endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String failedEndpointUri = exchange.getProperty(Exchange.FAILURE_ENDPOINT, String.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Exchange.FAILURE_ENDPOINT</code> have the constant value
<code>CamelFailureEndpoint</code>.</p>
</div>
<div class="paragraph">
<p>This allows for example you to fetch this information in your dead
letter queue and use that for error reporting.<br>
 This is useable if the Camel route is a bit dynamic such as the dynamic
<a href="recipientList-eip.html" class="page">Recipient List</a> so you know which endpoints
failed.</p>
</div>
<div class="paragraph">
<p>These information is kept on the Exchange even if the message
was successfully processed by a given endpoint, and then later fails for
example in a local <a href="../bean-component.html" class="page">Bean</a> processing instead. So beware
that this is a hint that helps pinpoint errors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("activemq:queue:foo")
    .to("http://someserver/somepath")
    .beanRef("foo");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now suppose the route above and a failure happens in the <code>foo</code> bean.
Then the <code>Exchange.TO_ENDPOINT</code> and <code>Exchange.FAILURE_ENDPOINT</code> will
still contain the value of <code>http://someserver/somepath</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-OnPrepareFailure"><a class="anchor" href="#deadLetterChannel-OnPrepareFailure"></a>OnPrepareFailure</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Since Camel 2.16</strong></p>
</div>
<div class="paragraph">
<p>Before the exchange is sent to the dead letter queue, you can use
onPrepare to allow a custom <code>Processor</code> to prepare the exchange, such as
adding information why the Exchange failed. For example the following
processor adds a header with the exception message</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static class MyPrepareProcessor implements Processor {
    @Override
    public void process(Exchange exchange) throws Exception {
        Exception cause = exchange.getProperty(Exchange.EXCEPTION_CAUGHT, Exception.class);
        exchange.getIn().setHeader("FailedBecause", cause.getMessage());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then configure the error handler to use the processor as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">errorHandler(deadLetterChannel("jms:dead").onPrepareFailure(new MyPrepareProcessor()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuring this from XML DSL is as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="myPrepare"
      class="org.apache.camel.processor.DeadLetterChannelOnPrepareTest.MyPrepareProcessor"/&gt;


&lt;errorHandler id="dlc" type="DeadLetterChannel" deadLetterUri="jms:dead" onPrepareFailureRef="myPrepare"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The onPrepare is also available using the default error handler.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Whichroutefailed"><a class="anchor" href="#deadLetterChannel-Whichroutefailed"></a>Which route failed</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Since Camel 2.10.4/2.11</strong></p>
</div>
<div class="paragraph">
<p>When Camel error handler handles an error such as
<a href="#">Dead Letter Channel</a> or using
<a href="../../../manual/latest/exception-clause.html" class="page">Exception Clause</a> with handled=true, then
Camel will decorate<br>
 the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> with the route id where the error
occurred.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String failedRouteId = exchange.getProperty(Exchange.FAILURE_ROUTE_ID, String.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Exchange.FAILURE_ROUTE_ID</code> have the constant value
<code>CamelFailureRouteId</code>.</p>
</div>
<div class="paragraph">
<p>This allows for example you to fetch this information in your dead
letter queue and use that for error reporting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Controlifredeliveryisallowedduringstoppingshutdown"><a class="anchor" href="#deadLetterChannel-Controlifredeliveryisallowedduringstoppingshutdown"></a>Control if redelivery is allowed during stopping/shutdown</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Since Camel 2.11</strong></p>
</div>
<div class="paragraph">
<p>Prior to Camel 2.10, Camel will perform redelivery while stopping a
route, or shutting down Camel. This has improved a bit in Camel 2.10
onwards, as Camel will not perform redelivery attempts when shutting
down aggressively (eg during <a href="../../../manual/latest/graceful-shutdown.html" class="page">Graceful
Shutdown</a> and timeout hit). From Camel 2.11 onwards there is a new
option <code>allowRedeliveryWhileStopping</code> which you can use to control if
redelivery is allowed or not; notice that any in progress redelivery
will still be executed. This option can only disallow any redelivery to
be executed <strong>after</strong> the stopping of a route/shutdown of Camel has been
triggered. If a redelivery is disallowed then a
<code>RejectedExecutionException</code> is set on the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a>
and the processing of the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> stops. This means
any consumer will see the <a href="../../../manual/latest/exchange.html" class="page">Exchange</a> as failed due the
<code>RejectedExecutionException</code>.</p>
</div>
<div class="paragraph">
<p>The default value is <code>true</code> to be backwards compatible as before. For
example the following sample shows how to do this with Java DSL and XML
DSL</p>
</div>
<div class="paragraph">
<p>And the sample with XML DSL</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-Samples"><a class="anchor" href="#deadLetterChannel-Samples"></a>Samples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example shows how to configure the Dead Letter Channel
configuration using the <a href="../../../manual/latest/dsl.html" class="page">DSL</a></p>
</div>
<div class="paragraph">
<p>You can also configure the
<a href="https://www.javadoc.io/doc/org.apache.camel/camel-base/current/org/apache/camel/processor/errorhandler/RedeliveryPolicy.html">RedeliveryPolicy</a>
as this example shows</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-HowcanImodifytheExchangebeforeredelivery"><a class="anchor" href="#deadLetterChannel-HowcanImodifytheExchangebeforeredelivery"></a>How can I modify the Exchange before redelivery?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We support directly in <a href="#">Dead Letter
Channel</a> to set a <a href="../../../manual/latest/processor.html" class="page">Processor</a> that is executed
<strong>before</strong> each redelivery attempt.</p>
</div>
<div class="paragraph">
<p>When <a href="#">Dead Letter Channel</a> is doing
redeliver its possible to configure a <a href="../../../manual/latest/processor.html" class="page">Processor</a>
that is executed just <strong>before</strong> every redelivery attempt. This can be
used for the situations where you need to alter the message before its
redelivered.</p>
</div>
<div class="paragraph">
<p>Here we configure the <a href="#">Dead Letter Channel</a>
to use our processor <code>MyRedeliveryProcessor</code> to be executed before each
redelivery.</p>
</div>
<div class="paragraph">
<p>And this is the processor <code>MyRedeliveryProcessor</code> where we alter the
message.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deadLetterChannel-HowcanIlogwhatcausedtheDeadLetterChanneltobeinvoked"><a class="anchor" href="#deadLetterChannel-HowcanIlogwhatcausedtheDeadLetterChanneltobeinvoked"></a>How can I log what caused the Dead Letter Channel to be invoked?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You often need to know what went wrong that caused the Dead Letter
Channel to be used and it does not offer logging for this purpose. So
the Dead Letter Channel&#8217;s endpoint can be set to a endpoint of our own
(such as <code>direct:deadLetterChannel</code>). We write a route to accept this
Exchange and log the Exception, then forward on to where we want the
failed Exchange moved to (which might be a DLQ queue for instance). See
also <a href="http://stackoverflow.com/questions/13711462/logging-camel-exceptions-and-sending-to-the-dead-letter-channel">http://stackoverflow.com/questions/13711462/logging-camel-exceptions-and-sending-to-the-dead-letter-channel</a></p>
</div>
<div class="sect2">
<h3 id="deadLetterChannel-UsingThisPattern"><a class="anchor" href="#deadLetterChannel-UsingThisPattern"></a>Using This Pattern</h3>
<div class="paragraph">
<p>If you would like to use this EIP Pattern then please read the
<a href="../../../manual/latest/getting-started.html" class="page">Getting Started</a>, you may also find the
<a href="../../../manual/latest/architecture.html" class="page">Architecture</a> useful particularly the description
of <a href="../../../manual/latest/endpoint.html" class="page">Endpoint</a> and <a href="../../../manual/latest/uris.html" class="page">URIs</a>. Then you could
try out some of the <a href="../../../manual/latest/examples.html" class="page">Examples</a> first before trying
this pattern out.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../manual/latest/error-handler.html" class="page">Error Handler</a></p>
</li>
<li>
<p><a href="../../../manual/latest/exception-clause.html" class="page">Exception Clause</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
